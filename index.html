<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!-- http://creativecommons.org/publicdomain/zero/1.0/
     To the extent possible under law, risgk has waived
     all copyright and related or neighboring rights to this file. -->
<title>Digital Synth WRA32-R</title>
<script src="./opal/0.10.1/opal.min.js"></script>
<script src="./opal/0.10.1/opal-parser.min.js"></script>
<script>Opal.load('opal-parser');</script>
<script type="text/ruby">
%x{
  var audioContext = new AudioContext();
  var SAMPLE_RATE = audioContext.sampleRate;
  var scriptProcessor = audioContext.createScriptProcessor();
  var BUFFER_SIZE = scriptProcessor.bufferSize;

  function onAudioProcess(event) {
    var bufferL = event.outputBuffer.getChannelData(0);
    var bufferR = event.outputBuffer.getChannelData(1);
    for (var i = 0; i < BUFFER_SIZE; i++) {
      bufferL[i] = bufferR[i] = (#{rand} - 0.5) / 10.0;
    }
  }

  scriptProcessor.onaudioprocess = onAudioProcess;
  scriptProcessor.connect(audioContext.destination);
}
</script>
</head>
<body>
Digital Synth WRA32-R 0.0.0
</body>
</html>
